<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
  <title>bytes-counter demo</title>
  <script src="../../../@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
  <script type="module" src="../../../@polymer/polymer/lib/elements/dom-bind.js"></script>
  <script type="module" src="../../../@polymer/iron-demo-helpers/demo-pages-shared-styles.js"></script>
  <script type="module" src="../../../@polymer/iron-demo-helpers/demo-snippet.js"></script>
  <script type="module" src="../../../@polymer/paper-toast/paper-toast.js"></script>
  <script type="module" src="../bytes-counter.js"></script>
  <script type="module">
const $_documentContainer = document.createElement('template');

$_documentContainer.innerHTML = `<custom-style>
    <style is="custom-style" include="demo-pages-shared-styles">
    output {
      display: block;
      margin-top: 20px;
      padding: 0.73em 0.54em;
      border: 1px grey solid;
    }
    </style>
  </custom-style>`;

document.body.appendChild($_documentContainer.content);
</script>
</head>
<body unresolved="">
  <script type="module">
const $_documentContainer = document.createElement('template');

$_documentContainer.innerHTML = `<div class="vertical-section-container centered">
    <h3>Size of string</h3>
    <demo-snippet>
      <dom-bind>
        <template is="dom-bind">
          <textarea value="{{value::input}}"></textarea>
          <bytes-counter value="[[value]]" bytes="{{bytes}}"></bytes-counter>
          <output>Current input has [[bytes]] bytes</output>
        </template>
      </dom-bind>
    </demo-snippet>

    <h3>Size of file</h3>
    <demo-snippet>
      <dom-bind id="file">
        <template is="dom-bind">
          <input on-change="fileChanged" type="file">
          <bytes-counter bytes="{{bytes}}"></bytes-counter>
          <output>Current input has [[bytes]] bytes</output>
          <script>
            var file = document.getElementById('file');
            file.fileChanged = function(e) {
              e.target.nextElementSibling.value = e.target.files[0];
            };
          &lt;/script>
        </template>
      </dom-bind>
    </demo-snippet>

    <h3>Size of FormData</h3>
    <demo-snippet>
      <dom-bind id="form">
        <template is="dom-bind">
          <form method="post" enctype="multipart/form-data" on-submit="submit">
            <input type="file" name="file">
            <input name="text">
            <input type="submit" value="Submit">
          </form>
          <bytes-counter bytes="{{bytes}}" on-error="onError"></bytes-counter>
          <p>Note: Computed size is the size of the entire multipart message</p>
          <output>Current input has [[bytes]] bytes</output>
          <script>
            var form = document.getElementById('form');
            form.submit = function(e) {
              e.preventDefault();
              e.target.nextElementSibling.value = new FormData(e.target);
            };
            form.onError = function(e) {
              var toast = document.body.querySelector('paper-toast');
              toast.text = e.detail.message;
              toast.opened = true;
            };
          &lt;/script>
        </template>
      </dom-bind>
    </demo-snippet>

    <h3>Size of ArrayBuffer</h3>
    <demo-snippet>
      <dom-bind id="buffer">
        <template is="dom-bind">
          <textarea on-input="onInput"></textarea>
          <bytes-counter bytes="{{bytes}}"></bytes-counter>
          <output>Current input has [[bytes]] bytes</output>
          <script>
            var buffer = document.getElementById('buffer');
            buffer.onInput = function(e) {
              var value;
              if ('TextEncoder' in window) {
                var encoder = new TextEncoder();
                var encoded = encoder.encode(e.target.value);
                value = encoded.buffer;
              } else {
                var str = e.target.value;
                value = new ArrayBuffer(str.length);
                var _bufferView = new Uint8Array(value);
                for (var i = 0; i < str.length; i++) {
                  _bufferView[i] = str.charCodeAt(i);
                }
              }
              e.target.nextElementSibling.value = value;
            };
          &lt;/script>
        </template>
      </dom-bind>
    </demo-snippet>

    <paper-toast></paper-toast>
  </div>`;

document.body.appendChild($_documentContainer.content);
</script>encoder = new TextEncoder();
    var encoded = encoder.encode(e.target.value);
    value = encoded.buffer;
  } else {
    var str = e.target.value;
    value = new ArrayBuffer(str.length);
    var _bufferView = new Uint8Array(value);
    for (var i = 0; i &lt; str.length; i++) {
      _bufferView[i] = str.charCodeAt(i);
    }
  }
  e.target.nextElementSibling.value = value;
};

        
      
    

    <paper-toast></paper-toast>
  


</body></html>